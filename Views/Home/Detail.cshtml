@model WillThisWork.Models.Hate



<article>

    <div class="article-main">

        <div class=" article-describe">
            @if (Model.UserId != null)
            {
                <p>Hate użytkownika :@Html.ActionLink(Model.User.UserName, "ProfileCabine", "Home", new { id = Model.UserId }, null)</p>
            }
            <h1>@Model.Title </h1>
            <h3>@Model.Champion.Name</h3>
            <p>@Model.Description</p>
        </div>

        @if (Model.fileExtension == ".mp4" || Model.fileExtension == ".MP4")
        {
            <video width="650" height="450" controls>
                <source src="@Url.Content(Model.ImagePath == null ? "~/Images/LeagueHate.png" : Model.ImagePath)" type="video/mp4">
                <source src="movie.ogg" type="video/ogg">
                Your browser does not support the video tag.

            </video>

        }
        else
        {
            <div class="article-img">
                <img src="@Url.Content(Model.ImagePath == null ? "~/Images/LeagueHate.png" : Model.ImagePath)" alt="photo or gif with hate" class="hate-img">

            </div>

        }


        <div class="article-controls">
            <ul>
                <li><button class="btn btn-like" id="btnLike" type="button">Like</button></li> Likes : @Model.Likes
                <li><button class="btn btn-unlike"id="btnDislike" type="button">Unlike</button></li> Dislikes : @Model.Dislikes
            </ul>

        </div>


    </div>
    <div>
        <div>
            Comments
        </div>

        @if (Model.Comments != null && Model.Comments.Count > 0)
        {
            foreach (var comment in Model.Comments)
            {
        <div class="container mt-5">
            <div class="row d-flex justify-content-center">
                <div class="col-md-8">
                    
                   
                    <div class="card p-3 mt-2">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="user d-flex flex-row align-items-center"> <img src="~/Images/test.jpg" width="30" class="user-img rounded-circle mr-2"> <span>
                                <small class="font-weight-bold text-primary">@comment.UserName</small>
                                <small class=class="font-weight-bold">@comment.Text</small>
                                    </span> </div> <small>@comment.TimeStamp</small>
                        </div>
                        <div class="action d-flex justify-content-between mt-2 align-items-center">
                            @if (User.Identity.IsAuthenticated == true)
                            {
                            <div class="reply px-4"> <small>Remove</small> <span class="dots"></span>  </div>
                            }
                            <div class="icons align-items-center"> <i class="fa fa-check-circle-o check-icon text-primary"></i> </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            }
        }
      
        <article>



            <form id="commentForm">
                <input type="hidden" name="EntityId" value="23" />
                <input type="hidden" name="RecordId" value="@Model.Id" />

                <div class="form-group">
                    <label>Write your comment</label>
                    <textarea class="form-control" rows="3" name="Text" placeholder="Write your comment here"></textarea>
                </div>
            </form>
            @if (User.Identity.IsAuthenticated == true)
            {
                <button class="btn btn-comment" id="btnComment" type="button">Leave a comment</button>
            }
            else
            {
                <p>Please log in to comment</p>
            }
        </article>

</article>
    </div>

<script>
    $("#btnComment").click(function () {
        $.ajax({
            url: "@Url.Action("LeaveComment","Home")",
            type: "post",
            data: $("#commentForm").serialize()

        }).done(function (response) {
            
            if (response.Success) {
                window.location.reload();
            }
            else {
                
            }
        }).fail(function(){
            
        });
    });

</script>

<script>
    $("#btnLike").click(function () {
        $.ajax({
            url: "@Url.Action("AddLike", "Home", new { id = Model.Id })",
            type: "post"

        }).done(function (response) {

            if (response.Success) {
                window.location.reload();
            }
            else {

            }
        }).fail(function(){

        });
    });

</script>

<script>
    $("#btnDislike").click(function () {
        $.ajax({
            url: "@Url.Action("AddDislike", "Home", new { id = Model.Id })",
            type: "post"

        }).done(function (response) {

            if (response.Success) {
                window.location.reload();
            }
            else {

            }
        }).fail(function(){

        });
    });

</script>